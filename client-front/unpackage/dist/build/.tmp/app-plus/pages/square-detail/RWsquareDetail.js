(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/square-detail/RWsquareDetail"],{5627:function(t,e,n){"use strict";n.r(e);var a=n("e3d1"),s=n.n(a);for(var c in a)"default"!==c&&function(t){n.d(e,t,function(){return a[t]})}(c);e["default"]=s.a},"584c":function(t,e,n){"use strict";(function(t){n("85c2"),n("921b");a(n("66fd"));var e=a(n("ec07"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"623b":function(t,e,n){"use strict";var a=n("a6d2"),s=n.n(a);s.a},"998c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s})},a6d2:function(t,e,n){},bd1e:function(t,e,n){"use strict";var a=n("ea00"),s=n.n(a);s.a},e3d1:function(t,e,n){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{isCard:!0,isMine:!1,msg:[],taskImg:[],task:{},commentText:""}},onLoad:function(t){this.task=JSON.parse(decodeURIComponent(t.task)),this.commentText=t.comment||"",this.getMsg()},onShow:function(){this.isMine=t.getStorageSync("account")==this.task.account,this.taskImg=[],this.getTaskImg()},computed:{isPublishMan:function(){return t.getStorageSync("account")==this.task.account}},methods:{changeCommentText:function(t){this.commentText=t.detail.value},IsCard:function(t){this.isCard=t.detail.value},toEditComment:function(){t.redirectTo({url:"./RWcomment?task=".concat(encodeURIComponent(JSON.stringify(this.task)))})},getTaskImg:function(){var t=this;this.RWajax.get("/photo/query",{linkId:t.task.taskId}).then(function(e){if(1==e.data.success)for(var n=0;n<e.data.result.length;n++)t.taskImg.push(e.data.result[n].url)})},ViewImage:function(e){t.previewImage({urls:this.taskImg,current:e.currentTarget.dataset.url})},pickBestComment:function(e){var n=this;this.RWajax.post("/comment/pick",{commentId:e,account:t.getStorageSync("account")}).then(function(e){1==e.data.success?t.showToast({title:"采用成功",icon:"success",success:function(){n.msg=[],n.getMsg()}}):t.showToast({title:"采用失败"+e.data.result,icon:"none"})})},sendCommen:function(){var e=this;t.showLoading({title:"评论中...",mask:!0}),this.RWajax.post("/comment/publish",{account:t.getStorageSync("account"),taskId:e.task.taskId,commentText:e.commentText}).then(function(a){console.log(n(a," at pages\\square-detail\\RWsquareDetail.vue:192")),1==a.data.success?t.showToast({title:"发送成功"}):t.showToast({title:"发送失败"}),e.getMsg()}).finally(function(e){console.log(n(e," at pages\\square-detail\\RWsquareDetail.vue:204")),t.hideLoading()})},getMsg:function(){var e=this;this.RWajax.get("/task/query/comments",{taskId:this.task.taskId,account:t.getStorageSync("account")}).then(function(t){1==t.data.success&&(e.msg=t.data.result)})}}};e.default=a}).call(this,n("6e42")["default"],n("0de9")["default"])},ea00:function(t,e,n){},ec07:function(t,e,n){"use strict";n.r(e);var a=n("998c"),s=n("5627");for(var c in s)"default"!==c&&function(t){n.d(e,t,function(){return s[t]})}(c);n("623b"),n("bd1e");var o=n("2877"),i=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,"740dd636",null);e["default"]=i.exports}},[["584c","common/runtime","common/vendor"]]]);