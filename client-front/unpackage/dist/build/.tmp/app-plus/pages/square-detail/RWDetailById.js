(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/square-detail/RWDetailById"],{"01b1":function(t,a,e){"use strict";var n=e("1e7a"),s=e.n(n);s.a},"184f":function(t,a,e){"use strict";(function(t){e("85c2"),e("921b");n(e("66fd"));var a=n(e("cc75"));function n(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("6e42")["createPage"])},"1e7a":function(t,a,e){},4801:function(t,a,e){"use strict";e.r(a);var n=e("ec25"),s=e.n(n);for(var c in n)"default"!==c&&function(t){e.d(a,t,function(){return n[t]})}(c);a["default"]=s.a},ad07:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=(t._self._c,t.avatarDefault(t.task.avatarUrl)),n=t.__map(t.msg,function(a,e){var n=t.avatarDefault(a.avatarUrl),s=t.__map(a.pictureBeans,function(a,e){var n=t.avatarDefault(a.url);return{$orig:t.__get_orig(a),m2:n}});return{$orig:t.__get_orig(a),m1:n,l0:s}});t.$mp.data=Object.assign({},{$root:{m0:e,l1:n}})},s=[];e.d(a,"a",function(){return n}),e.d(a,"b",function(){return s})},bc80:function(t,a,e){},cc75:function(t,a,e){"use strict";e.r(a);var n=e("ad07"),s=e("4801");for(var c in s)"default"!==c&&function(t){e.d(a,t,function(){return s[t]})}(c);e("01b1"),e("d859");var u=e("2877"),o=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,"650eee51",null);a["default"]=o.exports},d859:function(t,a,e){"use strict";var n=e("bc80"),s=e.n(n);s.a},ec25:function(t,a,e){"use strict";(function(t,e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={data:function(){return{isCard:!0,isMine:!1,msg:[],taskImg:[],task:{},taskId:"",commentText:""}},onLoad:function(t){this.taskId=t.taskId,this.getTask()},onShow:function(){this.isMine=t.getStorageSync("account")==this.task.account},computed:{isPublishMan:function(){if(t.getStorageSync("account")==this.task.account)return!0}},methods:{changeCommentText:function(t){this.commentText=t.detail.value},IsCard:function(t){this.isCard=t.detail.value},toEditComment:function(){t.redirectTo({url:"./RWcomment?task=".concat(encodeURIComponent(JSON.stringify(this.task)))})},getTaskImg:function(){var t=this;this.RWajax.get("/picture/query",{linkId:t.task.taskId}).then(function(a){if(1==a.data.success)for(var e=0;e<a.data.result.result.length;e++)t.taskImg.push(a.data.result.result[e].url)})},ViewImage:function(a){t.previewImage({urls:this.taskImg,current:a.currentTarget.dataset.url})},ViewCommentImg:function(a,e){for(var n=[],s=0;s<a.length;s++)n.push(a[s].url);t.previewImage({urls:n,current:n[e]})},pickBestComment:function(a){var e=this;this.RWajax.post("/comment/pick",{commentId:a,publisherAccount:t.getStorageSync("account")}).then(function(a){1==a.data.success?(t.showToast({title:"采用成功",icon:"success"}),e.msg=[],e.task.hasBest=!0,e.getMsg()):t.showToast({title:"采用失败:"+a.data.message,icon:"none"})})},getTask:function(){var t=this;this.RWajax.get("/task/query/single",{taskId:t.taskId}).then(function(a){1==a.data.success&&(t.task=a.data.result,t.getTaskImg(),t.getMsg())})},sendCommen:function(){var a=this;t.showLoading({title:"评论中...",mask:!0}),this.RWajax.post("/comment/publish",{account:t.getStorageSync("account"),taskId:a.task.taskId,commentText:a.commentText}).then(function(e){1==e.data.success?t.showToast({title:"发送成功"}):t.showToast({title:"发送失败"}),a.getMsg()}).finally(function(a){t.hideLoading()})},avatarDefault:function(t){return this.RWcommon.avatarDefault(t)},getMsg:function(){var a=this;this.RWajax.get("/task/query/comments",{taskId:this.taskId,account:t.getStorageSync("account")}).then(function(t){console.log(e(t," at pages\\square-detail\\RWDetailById.vue:249")),1==t.data.success&&(a.msg=t.data.result)})}},watch:{task:function(t,a){},msg:function(t,a){}}};a.default=n}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["184f","common/runtime","common/vendor"]]]);